set -e

source ./controller
[[ -f "constants.conf" ]] && source ./constants.conf

# ------------------------------------------------------------------- #
#                             INSTALLATION                            #
# ------------------------------------------------------------------- #


declare -a functions=(
    set_date
    disk_partition
    install_primary_setup
    install_packages_part_1
    install_gpu_driver
    install_packages_part_2
    modify_config
)

for function in ${functions[@]}; do
${function}
post_review
done

# ------------------------------------------------------------------- #
#                           REDIRECT TO CHROOT                        #
# ------------------------------------------------------------------- #

cp ./controller /mnt
cp ./chroot /mnt
cp ./constants.conf /mnt
arch-chroot /mnt /chroot

exit 0